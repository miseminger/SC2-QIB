Apr-22 12:28:45.495 [main] DEBUG nextflow.cli.Launcher - $> nextflow run sequencing_centre_trees.nf --start_date 2021-11-01 --end_date 2021-11-05 --diverseQueries false --centre NORW --max_samples_per_month false -with-report metrics.txt -resume
Apr-22 12:28:46.480 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 21.10.6
Apr-22 12:28:46.724 [main] INFO  nextflow.cli.CmdRun - Launching `sequencing_centre_trees.nf` [shrivelled_curie] - revision: ee45b88762
Apr-22 12:28:47.972 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; plugins-dir=/home/ubuntu/.nextflow/plugins
Apr-22 12:28:47.990 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Apr-22 12:28:48.162 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Apr-22 12:28:48.174 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Apr-22 12:28:48.261 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Apr-22 12:28:48.411 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Apr-22 12:28:49.286 [main] DEBUG nextflow.Session - Session uuid: 4f241b29-42a6-41ce-bff7-7bf045138a2c
Apr-22 12:28:49.286 [main] DEBUG nextflow.Session - Run name: shrivelled_curie
Apr-22 12:28:49.316 [main] DEBUG nextflow.Session - Executor pool size: 32
Apr-22 12:28:50.000 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 21.10.6 build 5660
  Created: 21-12-2021 16:55 UTC (16:55 BST)
  System: Linux 4.15.0-76-generic
  Runtime: Groovy 3.0.9 on OpenJDK 64-Bit Server VM 11.0.14.1+1-Ubuntu-0ubuntu1.18.04
  Encoding: UTF-8 (UTF-8)
  Process: 604@madeline-01 [192.168.10.248]
  CPUs: 32 - Mem: 230.6 GB (164.6 GB) - Swap: 0 (0)
Apr-22 12:28:50.666 [main] DEBUG nextflow.Session - Work-dir: /home/ubuntu/nf-test/sequencing_centre_trees/work [ext2/ext3]
Apr-22 12:28:50.667 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /home/ubuntu/nf-test/sequencing_centre_trees/bin
Apr-22 12:28:50.719 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Apr-22 12:28:50.934 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Apr-22 12:28:51.737 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 33; maxThreads: 1000
Apr-22 12:28:55.324 [main] DEBUG nextflow.Session - Session start invoked
Apr-22 12:29:05.812 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Apr-22 12:29:06.898 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:06.900 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:06.959 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Apr-22 12:29:07.047 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=32; memory=230.6 GB; capacity=32; pollInterval=100ms; dumpInterval=5m
Apr-22 12:29:07.323 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 33; maxThreads: 1000
Apr-22 12:29:08.769 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:08.769 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:08.906 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:08.910 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:09.032 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:09.052 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:09.243 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:09.244 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:10.229 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:10.235 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:10.362 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:10.367 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:10.539 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:10.545 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:10.682 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:10.686 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:10.851 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Apr-22 12:29:10.853 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Apr-22 12:29:10.960 [main] DEBUG nextflow.Session - Workflow process names [dsl1]: getFastaRecords, reduceQueries, runPangolin, maskProblematicSites, getCOGUKMetadata, removeWuhanHu1, buildFastTree, refineTree, chooseSamples, joinMetadata
Apr-22 12:29:10.961 [main] DEBUG nextflow.script.ScriptRunner - > Await termination 
Apr-22 12:29:10.964 [main] DEBUG nextflow.Session - Session await
Apr-22 12:29:12.279 [Actor Thread 3] INFO  nextflow.processor.TaskProcessor - [2c/37e853] Cached process > chooseSamples (1)
Apr-22 12:29:12.691 [Actor Thread 21] INFO  nextflow.processor.TaskProcessor - [68/9fa73d] Cached process > getFastaRecords (1)
Apr-22 12:29:12.752 [Actor Thread 26] INFO  nextflow.processor.TaskProcessor - [7c/a6ef53] Cached process > maskProblematicSites (1)
Apr-22 12:29:12.819 [Actor Thread 33] INFO  nextflow.processor.TaskProcessor - [4d/65d672] Cached process > removeWuhanHu1 (1)
Apr-22 12:29:14.382 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Apr-22 12:29:14.649 [Task submitter] INFO  nextflow.Session - [d2/b216ca] Submitted process > getCOGUKMetadata (1)
Apr-22 12:29:15.176 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Apr-22 12:29:15.231 [Task submitter] INFO  nextflow.Session - [2d/9b8f50] Submitted process > runPangolin (1)
Apr-22 12:29:15.657 [Task submitter] DEBUG nextflow.executor.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Apr-22 12:29:15.710 [Task submitter] INFO  nextflow.Session - [44/df0334] Submitted process > buildFastTree (1)
Apr-22 12:29:36.387 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 6; name: buildFastTree (1); status: COMPLETED; exit: 2; error: -; workDir: /home/ubuntu/nf-test/sequencing_centre_trees/work/44/df03340c98a8cd2c3a8ac5acd1c9e1]
Apr-22 12:29:36.736 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'buildFastTree (1)'

Caused by:
  Process `buildFastTree (1)` terminated with an error exit status (2)

Command executed [/home/ubuntu/nf-test/sequencing_centre_trees/templates/rapidnj_tree.txt]:

  #!/bin/bash
  
  sed 's/\//_/g' *aln > reformatted.aln
  #sed 's/>/>_/g;/England/ s/$/_/g' *aln | sed 's/\//_/g' > reformatted.aln
  rapidnj reformatted.aln -i fa -t d -n -c 8 -o t -x fast.aln.tre
  sed `s/>/>_g;/England/ s/$/_/g' reformatted.aln > reformatted.aln

Command exit status:
  2

Command output:
  (empty)

Command error:
  95.74% 
  95.83% 
  95.91% 
  96.00% 
  96.09% 
  96.17% 
  96.26% 
  96.35% 
  96.43% 
  96.52% 
  96.61% 
  96.70% 
  96.78% 
  96.87% 
  96.96% 
  97.04% 
  97.13% 
  97.22% 
  97.30% 
  97.39% 
  97.48% 
  97.57% 
  97.65% 
  97.74% 
  97.83% 
  97.91% 
  98.00% 
  98.09% 
  98.17% 
  98.26% 
  98.35% 
  98.43% 
  98.52% 
  98.61% 
  98.70% 
  98.78% 
  98.87% 
  98.96% 
  99.04% 
  99.13% 
  99.22% 
  99.30% 
  99.39% 
  99.48% 
  99.57% 
  99.65% 
  99.74% 
  100.00% 
  .command.sh: line 6: unexpected EOF while looking for matching ``'
  .command.sh: line 7: syntax error: unexpected end of file

Work dir:
  /home/ubuntu/nf-test/sequencing_centre_trees/work/44/df03340c98a8cd2c3a8ac5acd1c9e1

Tip: you can try to figure out what's wrong by changing to the process work dir and showing the script file named `.command.sh`
Apr-22 12:29:36.922 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `buildFastTree (1)` terminated with an error exit status (2)
Apr-22 12:29:37.164 [Task monitor] DEBUG nextflow.Session - The following nodes are still active:
[process] joinMetadata
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: leaftips_cog_metadata.csv
  port 1: (queue) OPEN  ; channel: lineage_report.csv
  port 2: (cntrl) -     ; channel: $

Apr-22 12:29:37.240 [main] DEBUG nextflow.Session - Session await > all process finished
Apr-22 12:29:37.240 [main] DEBUG nextflow.Session - Session await > all barriers passed
Apr-22 12:29:37.380 [main] WARN  n.processor.TaskPollingMonitor - Killing pending tasks (2)
Apr-22 12:29:37.857 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=4; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=2; succeedDuration=0ms; failedDuration=20.6s; cachedDuration=57m 11s;loadCpus=0; loadMemory=0; peakRunning=3; peakCpus=3; peakMemory=0; ]
Apr-22 12:29:37.861 [main] DEBUG nextflow.trace.ReportObserver - Flow completing -- rendering html report
Apr-22 12:29:38.401 [main] DEBUG nextflow.trace.ReportObserver - Execution report summary data:
  [{"cpuUsage":{"mean":100.3,"min":100.3,"q1":100.3,"q2":100.3,"q3":100.3,"max":100.3,"minLabel":"chooseSamples (1)","maxLabel":"chooseSamples (1)","q1Label":"chooseSamples (1)","q2Label":"chooseSamples (1)","q3Label":"chooseSamples (1)"},"process":"chooseSamples","mem":{"mean":884539392,"min":884539392,"q1":884539392,"q2":884539392,"q3":884539392,"max":884539392,"minLabel":"chooseSamples (1)","maxLabel":"chooseSamples (1)","q1Label":"chooseSamples (1)","q2Label":"chooseSamples (1)","q3Label":"chooseSamples (1)"},"memUsage":null,"timeUsage":null,"vmem":{"mean":1188524032,"min":1188524032,"q1":1188524032,"q2":1188524032,"q3":1188524032,"max":1188524032,"minLabel":"chooseSamples (1)","maxLabel":"chooseSamples (1)","q1Label":"chooseSamples (1)","q2Label":"chooseSamples (1)","q3Label":"chooseSamples (1)"},"reads":{"mean":68144496,"min":68144496,"q1":68144496,"q2":68144496,"q3":68144496,"max":68144496,"minLabel":"chooseSamples (1)","maxLabel":"chooseSamples (1)","q1Label":"chooseSamples (1)","q2Label":"chooseSamples (1)","q3Label":"chooseSamples (1)"},"cpu":{"mean":100.3,"min":100.3,"q1":100.3,"q2":100.3,"q3":100.3,"max":100.3,"minLabel":"chooseSamples (1)","maxLabel":"chooseSamples (1)","q1Label":"chooseSamples (1)","q2Label":"chooseSamples (1)","q3Label":"chooseSamples (1)"},"time":{"mean":22631,"min":22631,"q1":22631,"q2":22631,"q3":22631,"max":22631,"minLabel":"chooseSamples (1)","maxLabel":"chooseSamples (1)","q1Label":"chooseSamples (1)","q2Label":"chooseSamples (1)","q3Label":"chooseSamples (1)"},"writes":{"mean":31784,"min":31784,"q1":31784,"q2":31784,"q3":31784,"max":31784,"minLabel":"chooseSamples (1)","maxLabel":"chooseSamples (1)","q1Label":"chooseSamples (1)","q2Label":"chooseSamples (1)","q3Label":"chooseSamples (1)"}},{"cpuUsage":{"mean":170.9,"min":170.9,"q1":170.9,"q2":170.9,"q3":170.9,"max":170.9,"minLabel":"getFastaRecords (1)","maxLabel":"getFastaRecords (1)","q1Label":"getFastaRecords (1)","q2Label":"getFastaRecords (1)","q3Label":"getFastaRecords (1)"},"process":"getFastaRecords","mem":{"mean":27123712,"min":27123712,"q1":27123712,"q2":27123712,"q3":27123712,"max":27123712,"minLabel":"getFastaRecords (1)","maxLabel":"getFastaRecords (1)","q1Label":"getFastaRecords (1)","q2Label":"getFastaRecords (1)","q3Label":"getFastaRecords (1)"},"memUsage":null,"timeUsage":null,"vmem":{"mean":78315520,"min":78315520,"q1":78315520,"q2":78315520,"q3":78315520,"max":78315520,"minLabel":"getFastaRecords (1)","maxLabel":"getFastaRecords (1)","q1Label":"getFastaRecords (1)","q2Label":"getFastaRecords (1)","q3Label":"getFastaRecords (1)"},"reads":{"mean":272798756796,"min":272798756796,"q1":272798756796,"q2":272798756796,"q3":272798756796,"max":272798756796,"minLabel":"getFastaRecords (1)","maxLabel":"getFastaRecords (1)","q1Label":"getFastaRecords (1)","q2Label":"getFastaRecords (1)","q3Label":"getFastaRecords (1)"},"cpu":{"mean":170.9,"min":170.9,"q1":170.9,"q2":170.9,"q3":170.9,"max":170.9,"minLabel":"getFastaRecords (1)","maxLabel":"getFastaRecords (1)","q1Label":"getFastaRecords (1)","q2Label":"getFastaRecords (1)","q3Label":"getFastaRecords (1)"},"time":{"mean":3406033,"min":3406033,"q1":3406033,"q2":3406033,"q3":3406033,"max":3406033,"minLabel":"getFastaRecords (1)","maxLabel":"getFastaRecords (1)","q1Label":"getFastaRecords (1)","q2Label":"getFastaRecords (1)","q3Label":"getFastaRecords (1)"},"writes":{"mean":272405771095,"min":272405771095,"q1":272405771095,"q2":272405771095,"q3":272405771095,"max":272405771095,"minLabel":"getFastaRecords (1)","maxLabel":"getFastaRecords (1)","q1Label":"getFastaRecords (1)","q2Label":"getFastaRecords (1)","q3Label":"getFastaRecords (1)"}},{"cpuUsage":{"mean":82,"min":82,"q1":82,"q2":82,"q3":82,"max":82,"minLabel":"maskProblematicSites (1)","maxLabel":"maskProblematicSites (1)","q1Label":"maskProblematicSites (1)","q2Label":"maskProblematicSites (1)","q3Label":"maskProblematicSites (1)"},"process":"maskProblematicSites","mem":{"mean":51486720,"min":51486720,"q1":51486720,"q2":51486720,"q3":51486720,"max":51486720,"minLabel":"maskProblematicSites (1)","maxLabel":"maskProblematicSites (1)","q1Label":"maskProblematicSites (1)","q2Label":"maskProblematicSites (1)","q3Label":"maskProblematicSites (1)"},"memUsage":null,"timeUsage":null,"vmem":{"mean":77877248,"min":77877248,"q1":77877248,"q2":77877248,"q3":77877248,"max":77877248,"minLabel":"maskProblematicSites (1)","maxLabel":"maskProblematicSites (1)","q1Label":"maskProblematicSites (1)","q2Label":"maskProblematicSites (1)","q3Label":"maskProblematicSites (1)"},"reads":{"mean":35191683,"min":35191683,"q1":35191683,"q2":35191683,"q3":35191683,"max":35191683,"minLabel":"maskProblematicSites (1)","maxLabel":"maskProblematicSites (1)","q1Label":"maskProblematicSites (1)","q2Label":"maskProblematicSites (1)","q3Label":"maskProblematicSites (1)"},"cpu":{"mean":82,"min":82,"q1":82,"q2":82,"q3":82,"max":82,"minLabel":"maskProblematicSites (1)","maxLabel":"maskProblematicSites (1)","q1Label":"maskProblematicSites (1)","q2Label":"maskProblematicSites (1)","q3Label":"maskProblematicSites (1)"},"time":{"mean":1769,"min":1769,"q1":1769,"q2":1769,"q3":1769,"max":1769,"minLabel":"maskProblematicSites (1)","maxLabel":"maskProblematicSites (1)","q1Label":"maskProblematicSites (1)","q2Label":"maskProblematicSites (1)","q3Label":"maskProblematicSites (1)"},"writes":{"mean":34450866,"min":34450866,"q1":34450866,"q2":34450866,"q3":34450866,"max":34450866,"minLabel":"maskProblematicSites (1)","maxLabel":"maskProblematicSites (1)","q1Label":"maskProblematicSites (1)","q2Label":"maskProblematicSites (1)","q3Label":"maskProblematicSites (1)"}},{"cpuUsage":{"mean":91.5,"min":91.5,"q1":91.5,"q2":91.5,"q3":91.5,"max":91.5,"minLabel":"removeWuhanHu1 (1)","maxLabel":"removeWuhanHu1 (1)","q1Label":"removeWuhanHu1 (1)","q2Label":"removeWuhanHu1 (1)","q3Label":"removeWuhanHu1 (1)"},"process":"removeWuhanHu1","mem":{"mean":5865472,"min":5865472,"q1":5865472,"q2":5865472,"q3":5865472,"max":5865472,"minLabel":"removeWuhanHu1 (1)","maxLabel":"removeWuhanHu1 (1)","q1Label":"removeWuhanHu1 (1)","q2Label":"removeWuhanHu1 (1)","q3Label":"removeWuhanHu1 (1)"},"memUsage":null,"timeUsage":null,"vmem":{"mean":31158272,"min":31158272,"q1":31158272,"q2":31158272,"q3":31158272,"max":31158272,"minLabel":"removeWuhanHu1 (1)","maxLabel":"removeWuhanHu1 (1)","q1Label":"removeWuhanHu1 (1)","q2Label":"removeWuhanHu1 (1)","q3Label":"removeWuhanHu1 (1)"},"reads":{"mean":34579832,"min":34579832,"q1":34579832,"q2":34579832,"q3":34579832,"max":34579832,"minLabel":"removeWuhanHu1 (1)","maxLabel":"removeWuhanHu1 (1)","q1Label":"removeWuhanHu1 (1)","q2Label":"removeWuhanHu1 (1)","q3Label":"removeWuhanHu1 (1)"},"cpu":{"mean":91.5,"min":91.5,"q1":91.5,"q2":91.5,"q3":91.5,"max":91.5,"minLabel":"removeWuhanHu1 (1)","maxLabel":"removeWuhanHu1 (1)","q1Label":"removeWuhanHu1 (1)","q2Label":"removeWuhanHu1 (1)","q3Label":"removeWuhanHu1 (1)"},"time":{"mean":418,"min":418,"q1":418,"q2":418,"q3":418,"max":418,"minLabel":"removeWuhanHu1 (1)","maxLabel":"removeWuhanHu1 (1)","q1Label":"removeWuhanHu1 (1)","q2Label":"removeWuhanHu1 (1)","q3Label":"removeWuhanHu1 (1)"},"writes":{"mean":34420864,"min":34420864,"q1":34420864,"q2":34420864,"q3":34420864,"max":34420864,"minLabel":"removeWuhanHu1 (1)","maxLabel":"removeWuhanHu1 (1)","q1Label":"removeWuhanHu1 (1)","q2Label":"removeWuhanHu1 (1)","q3Label":"removeWuhanHu1 (1)"}},{"cpuUsage":null,"process":"buildFastTree","mem":null,"memUsage":null,"timeUsage":null,"vmem":null,"reads":null,"cpu":null,"time":{"mean":20566,"min":20566,"q1":20566,"q2":20566,"q3":20566,"max":20566,"minLabel":"buildFastTree (1)","maxLabel":"buildFastTree (1)","q1Label":"buildFastTree (1)","q2Label":"buildFastTree (1)","q3Label":"buildFastTree (1)"},"writes":null},{"cpuUsage":null,"process":"getCOGUKMetadata","mem":null,"memUsage":null,"timeUsage":null,"vmem":null,"reads":null,"cpu":null,"time":null,"writes":null},{"cpuUsage":null,"process":"runPangolin","mem":null,"memUsage":null,"timeUsage":null,"vmem":null,"reads":null,"cpu":null,"time":null,"writes":null}]
Apr-22 12:29:41.367 [main] DEBUG nextflow.CacheDB - Closing CacheDB done
Apr-22 12:29:41.425 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
